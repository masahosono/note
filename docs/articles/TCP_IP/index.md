---
id: 'TCP_IP'
title: 'TCP/IP'
createDateTime: '2022-03-13 15:15:00'
updateDateTime: '2022-03-13 15:15:00'
categoryId: 'nw-siken'
description: ''
thumbnail: ''
published: true
---
# TCP/IP

## TCP/IPのプロトコル階層

| プロトコル階層 | 役割                                                                                    | 送信単位        |
|---------|:--------------------------------------------------------------------------------------|-------------|
| アプリケーション層        | アプリケーション固有の処理を規定している。                                                                 |             |
| トランスポート層        | プロセスを識別する。<br> 正しいプロセスにパケットを送信する。<br> 宛先のプロセスは**ポート番号**で識別する。                         | セグメント、パケット  |
| ネットワーク層        | 最終的な宛先を識別する。<br> パケットを中継する。 <br> 最終的な宛先は、**IPアドレス**で識別する。　                            | データグラム、パケット |
| データリンク層        | LAN内で**データフレーム**を伝送する。 <br> 送信元と宛先は**MACアドレス**で識別する。<br>LANからLANへの中継はデータリンク層では識別できない。 | フレーム |

ルータはネットワーク層とデータリンク層を兼ね備えている。

MACアドレス：同一のLANに存在するノードの指定に利用される。
IPアドレス：エンドノードの指定に利用される。

## カプセル化
上位層から受け取ったデータに対し、下位層の制御情報をヘッダに付与すること。

## データリンク層
有線または無線で接続されたノードの間で通信を行うための階層。
代表的なプロトコルはイーサネットである。

## イーサネットフレーム（MACフレーム） 
イーサネット上のデータパケットのこと。

|                 | 用途  | 説明                  |
|-----------------|-----|---------------------|
| DIX形式イーサネットフレーム | 通常  |                     |
| IEEE802.3フレーム   | 特殊  | DIX形式イーサネットフレームの拡張版 |

代表的な形式はDIX形式である。

| プリアンブル | 宛先MACアドレス | 送信元MACアドレス | タイプ | データ | FCS |
|--------|--|-----|-----|-----|-----|

詳細は以下の通り。
|     | 説明                                   | サイズ             |
|-----|--------------------------------------|-----------------|
| プリアンブル    | フレーム受信のタイミングをとる領域                    | 4バイト            |
| 宛先MACアドレス    | フレームの宛先を識別するMACアドレス                  | 6バイト            |
| 送信元MACアドレス    | フレームの送信元を識別するMACアドレス                 | 6バイト            |
| タイプ    | 上位層のプロトコル番号                          | 2バイト            |
| データ    | 送受信データ。上位層のパケットを格納                   | 46~1500バイト（MTU） |
| FCS    | Frame Check Sequence。伝送誤りを検出するCRC符号。 | 4バイト                |

MTU（Maximum Transmission Unit）：1フレームで伝送できるデータの最大値。イーサネットの場合は1500バイト。

信頼性の高い回線では、MTUを大きくする。（**伝送効率が高い**）
信頼性の低い回線では、MTUを小さくする。

### ジャンボフレーム
MTUが1500バイトより大きいフレームのこと
伝送効率が上がるが、接続機器間でジャンボフレームに対応していないとフレームが破棄されるといった問題がある。

### MACアドレス（Media Access Control）
ネットワークに接続されたノードを識別するための48ビットのアドレス。
16進数で8ビット単位でコロン区切りする。

例：18:33:3D:A3:BB:14

上位24ビットはベンダ番号（OUI）

OUIにはアドレス種別を表す特殊ビットが含まれる。
I/G：グローバルアドレスかローカルアドレスであるか。
G/L：ユニキャストアドレスかマルチキャストアドレスであるか。

| 特殊MACアドレス        | 用途                                                 |
|------------------|----------------------------------------------------|
| FF:FF:FF:FF:FF:FF | ブロードキャストアドレス                                       |
| 01:00:5E:XX:XX:XX | マルチキャストアドレス<br>上位層（ネットワーク層）でマルチキャストアドレスが指定された場合に使用 |



# 引用・参考文献
TAC情報処理講座 「ALL IN ONE パーフェクトマスター ネットワークスペシャリスト 2022年度 (情報処理技術者試験)　」、TAC出版、2021年
